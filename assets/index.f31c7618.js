var be=Object.defineProperty,ke=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var te=(e,t,s)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t)=>{for(var s in t||(t={}))Oe.call(t,s)&&te(e,s,t[s]);if(ee)for(var s of ee(t))xe.call(t,s)&&te(e,s,t[s]);return e},b=(e,t)=>ke(e,Ae(t));import{d as y,o as a,c as l,a as i,t as v,u,b as k,e as R,F as P,r as G,f as g,g as E,i as le,w as M,h as Le,j as Se,k as S,l as O,n as h,m as F,p as U,q as Re,s as Fe,v as Ce}from"./vendor.381068a4.js";import{request as T}from"https://cdn.skypack.dev/@octokit/request@5.6.3";const Ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};Ie();const ce=1e3,ue=ce*60,de=ue*60,ze=de*24,he=e=>{const t=e/ze,s=e/de,r=e/ue,n=e/ce;return t>=1?[t,t===1?"day":"days"]:s>=1?[s,s===1?"hour":"hours"]:r>=1?[r,r===1?"minute":"minutes"]:[Math.max(1,n),n<=1?"second":"seconds"]},Y=e=>{const t=new Date(e),r=new Date(Date.now()).valueOf()-t.valueOf(),[n,o]=he(r),[,{value:d},{value:_}]=new Intl.RelativeTimeFormat().formatToParts(Math.round(n),o);return d+_},qe={key:0},De=R(" Last activity by "),Pe=["href"],je=R(" "+v(" ")+" "),Ee=["href"],Me=y({props:{activity:null},setup(e){return(t,s)=>e.activity.lastActivity.user?(a(),l("p",qe,[De,i("a",{href:e.activity.lastActivity.user.html_url},v(e.activity.lastActivity.user.login),9,Pe),je,i("a",{href:e.activity.lastActivity.html_url},v(u(Y)(e.activity.lastActivity.updated_at))+" ago",9,Ee)])):k("",!0)}});var A=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s};const Te={},Be={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-info","aria-label":"Open issue"},Ve=i("circle",{cx:"12",cy:"12",r:"10"},null,-1),Ne=i("line",{x1:"12",y1:"16",x2:"12",y2:"12"},null,-1),We=i("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"},null,-1),He=[Ve,Ne,We];function Ge(e,t){return a(),l("svg",Be,He)}var Ue=A(Te,[["render",Ge]]);const Je={},Ke={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-git-pull-request","aria-label":"Open pull request"},Ye=i("circle",{cx:"18",cy:"18",r:"3"},null,-1),Qe=i("circle",{cx:"6",cy:"6",r:"3"},null,-1),Xe=i("path",{d:"M13 6h3a2 2 0 0 1 2 2v7"},null,-1),Ze=i("line",{x1:"6",y1:"9",x2:"6",y2:"21"},null,-1),et=[Ye,Qe,Xe,Ze];function tt(e,t){return a(),l("svg",Ke,et)}var st=A(Je,[["render",tt]]);const nt={},rt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-check-circle","aria-label":"Completed issue or PR"},ot=i("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),it=i("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1),at=[ot,it];function lt(e,t){return a(),l("svg",rt,at)}var se=A(nt,[["render",lt]]);const ct={},ut={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x-circle","aria-label":"Closed pull request"},dt=i("circle",{cx:"12",cy:"12",r:"10"},null,-1),ht=i("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),_t=i("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1),vt=[dt,ht,_t];function pt(e,t){return a(),l("svg",ut,vt)}var ft=A(ct,[["render",pt]]);const yt=y({props:{activity:null},setup(e){return(t,s)=>(a(),l("ul",null,[(a(!0),l(P,null,G(e.activity.labels,r=>(a(),l("li",null,v(r.name),1))),256))]))}}),_e=g(!1),ve=g(),pe=g(),B=E(_e),ne=E(ve),mt=E(pe),fe=e=>(pe.value=e["x-ratelimit-remaining"]&&parseInt(e["x-ratelimit-remaining"],10)||void 0,mt.value===0&&(_e.value=!0,ve.value=e["x-ratelimit-reset"]&&parseInt(e["x-ratelimit-reset"],10)||void 0),B.value),q=e=>!!e&&typeof e.$el!="undefined";function wt(e,t,s,r={}){le(e)?M(e,(n,o)=>{const d=q(o)?o.$el:o,_=q(n)?n.$el:n;d==null||d.removeEventListener(t,s),_==null||_.addEventListener(t,s,r)}):Le(()=>{(q(e)?e.$el:e).addEventListener(t,s,r)}),Se(()=>{const n=u(e);(q(n)?n.$el:n).removeEventListener(t,s)})}const D=typeof window=="undefined"||!("localStorage"in window)?void 0:window,Q=Object.freeze({boolean:{read:e=>e==="true",write:e=>String(e)},number:{read:e=>parseFloat(e),write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)}}),gt=Object.freeze({listenToStorageChanges:!0,writeDefaults:!0,window:D,storage:D==null?void 0:D.localStorage,serializer:Q.object,onError:e=>{console.error(e)}});function ye(e,t,s={}){var Z;const r=p(p({},gt),s),{listenToStorageChanges:n,writeDefaults:o,window:d,storage:_,onError:L}=r,c=u(t),I=c==null?"object":typeof c=="boolean"?"boolean":typeof c=="string"?"string":typeof c=="number"?"number":"object",$=g(c),N=(Z=s.serializer)!=null?Z:Q[I];function X(m){if(!(!_||m&&m.key!==e))try{const z=m?m.newValue:_.getItem(e);z==null?($.value=c,o&&c!==null&&_.setItem(e,N.write(c))):$.value=N.read(z)}catch(z){L(z)}}return X(),d&&n&&wt(d,"storage",m=>setTimeout(()=>X(m),0)),_&&M($,()=>{try{$.value==null?_.removeItem(e):_.setItem(e,N.write($.value))}catch(m){L(m)}}),$}const $t="overvue:gh-auth",me="invalid-auth",w=ye($t,null,{serializer:Q.string}),C=e=>{if(B.value)return!1;const t=le(e)?e.value:e;return typeof t=="string"&&t!==me},V=()=>C(w.value)?{authorization:`token ${w.value}`}:void 0,J=g(null),we=E(J);let W=!1;M(w,async e=>{if(!W){W=!0;try{if(!C(e)){J.value=null;return}const t=await T("GET /user",{headers:V()});J.value=t.data.login}catch(t){console.error("Unable to retrieve identity with current token",t)}finally{W=!1}}},{immediate:!0});const f=g([]),bt=S(()=>Boolean(f.value.length)),kt=e=>f.value.length===0||f.value.some(t=>t.test(e)),At=e=>S(()=>kt(e)),ge=e=>{f.value.includes(e)?f.value=f.value.filter(t=>t!==e):f.value=[...f.value,e]},j=ye("overvue:read",{}),$e=e=>{const t=new Date(Date.now()).toISOString();j.value=e.reduce((s,r)=>Object.assign(s,{[r.id]:t}),p({},j.value))},K=e=>{const t=j.value[e.id];return t?new Date(e.lastActivity.updated_at).valueOf()<new Date(t).valueOf():!1},Ot="_activity_1l5zn_2",xt="_hideableActivity_1l5zn_3",Lt="_hidden_1l5zn_21",St="_actions_1l5zn_43",Rt="_icon_1l5zn_50",Ft="_markAsRead_1l5zn_55",Ct="_read_1l5zn_59",It="_title_1l5zn_63",zt="_small_1l5zn_69";var qt={activity:Ot,hideableActivity:xt,hidden:Lt,actions:St,icon:Rt,markAsRead:Ft,read:Ct,title:It,small:zt};const Dt=["disabled"],Pt=["href"],jt=R(" Opened by "),Et=["href"],Mt=y({props:{activity:null},setup(e){var L;const t=e,s=g(K(t.activity));M([j],()=>{s.value=K(t.activity)});const r="pull_request"in t.activity,n=typeof t.activity.closed_at=="string",o=typeof((L=t.activity.pull_request)==null?void 0:L.merged_at)=="string",d=r?n?ft:o?se:st:n?se:Ue,_=At(t.activity);return(c,I)=>(a(),l("li",{class:h([c.$style.activity,u(bt)?c.$style.hideableActivity:c.$style.activity,s.value&&c.$style.read,!u(_)&&c.$style.hidden])},[i("div",{class:h(c.$style.actions)},[O(u(d),{class:h(c.$style.icon)},null,8,["class"]),i("button",{"aria-label":"Mark as read",onClick:I[0]||(I[0]=F($=>u($e)([e.activity]),["prevent"])),type:"button",disabled:s.value,class:h(c.$style.markAsRead)}," \u2611\uFE0F ",10,Dt)],2),i("div",null,[i("a",{class:h(c.$style.title),href:e.activity.html_url},v(e.activity.title),11,Pt),e.activity.user?(a(),l("p",{key:0,class:h(c.$style.small)},[jt,i("a",{href:e.activity.user.html_url},v(e.activity.user.login),9,Et),R(" "+v(u(Y)(e.activity.created_at))+" ago ",1)],2)):k("",!0),u(C)(u(w))?(a(),U(Me,{key:1,class:h(c.$style.small),activity:e.activity},null,8,["class","activity"])):k("",!0),e.activity.labels.length?(a(),U(yt,{key:2,activity:e.activity,class:h(c.$style.small)},null,8,["activity","class"])):k("",!0)])],2))}}),Tt={$style:qt};var Bt=A(Mt,[["__cssModules",Tt]]);const Vt=e=>{var s,r;const t=!e.comment_list||e.comment_list.length===0||new Date(e.updated_at).valueOf()>=new Date(e.comment_list[0].updated_at).valueOf()?"update":"comment";return[t,t==="update"?e:(r=(s=e.comment_list)==null?void 0:s[0])!=null?r:e]},Nt=Object.freeze(["openverse","openverse-catalog","openverse-api","openverse-frontend"]),x=Re({openverse:[],"openverse-catalog":[],"openverse-api":[],"openverse-frontend":[]}),re=()=>[...x.openverse,...x["openverse-catalog"],...x["openverse-api"],...x["openverse-frontend"]],H={openverse:!1,"openverse-catalog":!1,"openverse-api":!1,"openverse-frontend":!1},Wt=async e=>(await Promise.all(e.reduce((t,s)=>{var r,n,o;return"pull_request"in s&&t.push(T("GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers",{headers:V(),owner:"WordPress",repo:s.repository_url.split("/").slice(-1)[0],pull_number:parseInt((o=(n=(r=s.pull_request)==null?void 0:r.html_url)==null?void 0:n.split("/").slice(-1)[0])!=null?o:"",10)}).then(d=>(s.requestedReviewers=d.data,s))),t},[])),e),Ht=async e=>await Promise.all(e.map(async t=>{try{const s=await T(t.comments_url,{headers:V(),sort:"desc",per_page:1});return fe(s.headers),b(p({},t),{comment_list:s.data?s.data:[]})}catch(s){return console.error(`Unable to retrieve comments for issue(${t.id})`,s),b(p({},t),{comment_list:[]})}})),Gt=e=>b(p({},e),{labels:e.labels.map(t=>typeof t=="string"?{name:t}:t)}),Ut=e=>{var t;return b(p({},e),{priority:(t=e.labels.find(s=>s.name.includes("priority")))==null?void 0:t.name.split(" ").slice(-1)[0]})},oe=e=>{const[t,s]=Vt(e);return b(p({},e),{lastActivityType:t,lastActivity:s})},Jt=async e=>{if(H[e]||B.value)return[];H[e]=!0;try{const t=await T("GET /repos/{owner}/{repo}/issues",{headers:V(),owner:"WordPress",repo:e,sort:"updated",state:"all"}),s=t.data.map(r=>Ut(Gt(r)));return fe(t.headers)||!C(w.value)?s.map(r=>oe(b(p({},r),{comment_list:[]}))):await Wt((await Ht(s)).map(oe))}catch(t){return console.error(`Failed to retrieve issues for ${e}`,t),[]}finally{H[e]=!1}},Kt=async e=>{const t=await Jt(e);t&&(x[e]=t)};Nt.forEach(e=>Kt(e));const Yt="_container_axed4_2",Qt="_title_axed4_11",Xt="_titleLink_axed4_17",Zt="_pulls_axed4_30";var es={container:Yt,title:Qt,titleLink:Xt,pulls:Zt};const ts=["href"],ss=y({setup(e){return(t,s)=>(a(),l("div",{class:h(t.$style.container)},[(a(!0),l(P,null,G(u(x),(r,n)=>(a(),l("div",{class:h(t.$style.pulls),key:n},[i("h3",{class:h(t.$style.title)},[i("a",{class:h(t.$style.titleLink),href:`https://github.com/WordPress/${n}`,target:"_blank",rel:"noopener noreferrer"},"WordPress/"+v(n),11,ts)],2),i("ul",null,[(a(!0),l(P,null,G(r,o=>(a(),U(Bt,{key:o.id,activity:o},null,8,["activity"]))),128))])],2))),128))],2))}}),ns={$style:es};var rs=A(ss,[["__cssModules",ns]]);const os={key:0},is=["onClick"],as=y({setup(e){const t=g(re().map(K).some(Boolean)),s=()=>{$e(re()),t.value=!0};return(r,n)=>t.value?(a(),l("div",os,"You're all caught up!")):(a(),l("button",{key:1,onClick:F(s,["prevent"]),type:"button"}," Mark all as read ",8,is))}}),ls=["onSubmit"],cs=Fe('<summary>Expand if you want to raise your GitHub rate limit.</summary><p> If you&#39;d like to get even <em>more</em> information (like when an issue or pull request was last updated and by whom), please provide a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">GitHub personal access token</a>. </p><p> This token will only be stored in your browser&#39;s <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer"><code>localStorage</code></a> and will only be used to request information about activites in the public Openverse repositories. <strong>For your security, do not provide the token with any specific scopes! Leave all the scope checkboxes blank. This application does not need them and merely uses the token to increase the rate limit. Remember to always practice the <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege" target="_blank" rel="noopener noreferrer">principle of least privilege</a>.</strong></p><p> Providing a token is entirely optional. Without it you&#39;ll probably hit a rate limit if you visit this site often. Likewise, some features will be disabled to prevent hitting the rate limit (like specifics about who updated a pull request or issue). </p>',4),us={key:0},ds={key:1},hs=i("label",null,[R("GitHub personal access token: "),i("input",{type:"text",name:"auth",required:""})],-1),_s={key:1},vs=y({setup(e){const t=r=>{w.value=r.currentTarget.auth.value},s=()=>ne.value&&Y(new Date(ne.value).toDateString());return(r,n)=>u(C)(u(w))?(a(),l("div",_s,'Enjoy the "vue" \u{1F60E}')):(a(),l("form",{key:0,onSubmit:F(t,["prevent"])},[i("details",null,[cs,u(w)===u(me)?(a(),l("p",us," Whoops, it looks like your personal access token wasn't valid. Check to see if it's expired. ")):k("",!0),u(B)?(a(),l("p",ds," Oh dear, your rate limit for the GitHub API has been reached. It will reset in "+v(s())+". ",1)):k("",!0),hs])],40,ls))}}),ie=Object.freeze({type:"identity",test:e=>{var s,r;const t=we.value;if(!!t&&"pull_request"in e)return(r=(s=e.requestedReviewers)==null?void 0:s.users)==null?void 0:r.some(n=>n.login===t)}}),ae=Object.freeze({type:"priority",test:e=>{if(!("pull_request"in e)||e.closed_at!==null)return!1;const[t,s]=he(new Date(Date.now()).valueOf()-new Date(e.lastActivity.updated_at).valueOf());if(!s.startsWith("day"))return!1;switch(e.priority){case"critical":return!0;case"high":return t>=2;case"medium":return t>=3;case"low":return t>=5;case null:return!1}}}),ps=["onClick"],fs=y({setup(e){const t=S(()=>f.value.includes(ae)),s=()=>ge(ae);return(r,n)=>(a(),l("button",{onClick:F(s,["prevent"]),type:"button"},v(u(t)?"Show all activity":"Show overdue PRs"),9,ps))}}),ys=["onClick"],ms=y({setup(e){const t=S(()=>f.value.includes(ie)),s=S(()=>we.value!==null),r=()=>ge(ie);return(n,o)=>u(s)?(a(),l("button",{key:0,onClick:F(r,["prevent"]),type:"button"},v(u(t)?"Show all activity":"Show requested reviews"),9,ys)):k("",!0)}}),ws="_title_1vdwr_2",gs="_copy_1vdwr_11",$s="_auth_1vdwr_20";var bs={title:ws,copy:gs,auth:$s};const ks=y({setup(e){return(t,s)=>(a(),l(P,null,[i("h1",{class:h(t.$style.title)},"Openverse Project Overview",2),i("div",{class:h(t.$style.copy)},[i("div",{class:h(t.$style.auth)},[O(vs)],2),O(as),O(fs),O(ms)],2),O(rs)],64))}}),As={$style:bs};var Os=A(ks,[["__cssModules",As]]);Ce(Os).mount("#app");
